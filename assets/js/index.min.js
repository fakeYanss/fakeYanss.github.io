$(document).ready(function() {
    var $shutter = $('#cameraShutter');

    var photoImg = document.getElementById('info-photo');
    var timer;

    function imgLoad(img, callback) {
        img.style.opacity = '0.0';
        img.src = "https://source.unsplash.com/user/yanss/likes/320x320";
        timer = setTimeout(function() {
            if (img.complete) {
                console.log('loaded unsplash successful')
                img.style.opacity = '1.0';
            } else {
                img.src = "./images/tequila-sunrise.jpg";
                img.onload = function() {
                    img.style.opacity = '1.0';
                }
                console.log('loaded default successful')
            }
            clearTimeout(timer)
        }, 3000)
    }

    function printPhoto() {
        $('.info-content').toggleClass('animate');
        $('.camera .glass').toggleClass('active');
        clearTimeout(timer);
        if ($('.info-content').hasClass('animate')) {
            imgLoad(photoImg);
        }
    }

    $shutter.on('click', printPhoto);

    setTimeout(printPhoto, 500);

    console.log('© zchen9 🙋 2015-' + (new Date()).getFullYear());
    console.log('特别感谢zchen9小仙女的精彩主题，希望大家去follow她的github：https://github.com/zchen9');

});